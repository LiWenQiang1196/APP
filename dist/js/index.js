angular.module("app",["ui.router","validation","validation.rule"]),angular.module("app").controller("dengluCtrl",["$scope","$state",function(e,t){e.next=function(){localStorage.setItem("userid",1),t.go("mine1")}}]),angular.module("app").controller("mine1Ctrl",["$scope","$state",function(e,t){e.removuserid=function(){console.log(123),localStorage.removeItem("userid"),t.go("mine")}}]),angular.module("app").controller("mineCtrl",["$scope",function(e){}]),angular.module("app").controller("searchCtrl",["$filter","work_content_service","keywords_service","cityList_service","$scope",function(e,t,n,o,r){o.all().then(function(e){r.data=e}),r.keywordslist=n.get("keywords"),console.log(r.keywordslist),r.qshow=function(){r.isShow=!0},r.$on("cityid",function(e,t){o.oneId(t).then(function(e){r.cc=e.name,r.search()})}),r.search=function(){if(r.keywords){r.trfl=!0;var o=n.get("keywords");o.unshift(r.keywords),console.log(r.keywords),n.set("keywords",o),t.all().then(function(t){var n={city:r.cc,keywords:r.keywords};console.log(r.cc,15644);var o=e("jobfilter")(t,n);0==o.length?r.joblist=[]:r.joblist=o})}},r.$on("removekeywords",function(e,t){console.log(t,"fff"),r.keywordslist.splice(t,1),n.set("keywords",r.keywordslist)}),r.$on("odsearch",function(e,t){console.log(t,14141),r.keywords=t,r.search()})}]),angular.module("app").controller("workCtrl",["$http","$scope","work_content_service",function(e,t,n){n.all().then(function(e){t.list=e})}]),angular.module("app").controller("xiangqingCtrl",["xiangqing_content_service","work_content_service","$scope","$state",function(e,t,n,o){var r=o.params.id;t.oneId(r).then(function(t){n.dtaa=t,companyId=t.companyId,e.oneId(companyId).then(function(e){n.com=e})})}]),angular.module("app").controller("zhiweiCtrl",["xiangqing_content_service","$scope","$state",function(e,t,n){var o=n.params.id;console.log(o),e.oneId(o).then(function(e){t.data=e,console.log(t.data),t.index=0,t.change=function(e){t.index=e,t.ll=t.data.positionClass[e].positionList},t.change(0)})}]),angular.module("app").config(["$validationProvider",function(e){var t={phone:/^(1[3|5|7|8]{1}\d{9})$/,password:function(e){return e+="",e.length>=6}},n={phone:{error:"请输入合法的手机号",success:""},password:{error:"密码不能少于6位",success:""}};e.setExpression(t).setDefaultMsg(n)}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("work",{url:"/work",templateUrl:"view/work.html",controller:"workCtrl"}),e.state("search",{url:"/search",templateUrl:"view/search.html",controller:"searchCtrl"}),e.state("mine",{url:"/mine",templateUrl:"view/mine.html",controller:"mineCtrl"}),e.state("mine1",{url:"/mine1",templateUrl:"view/mine1.html",controller:"mine1Ctrl"}),e.state("xiangqing",{url:"/xiangqing/:id",templateUrl:"view/xiangqing.html",controller:"xiangqingCtrl"}),e.state("zhiwei",{url:"/zhiwei/:id",templateUrl:"view/zhiwei.html",controller:"zhiweiCtrl"}),e.state("denglu",{url:"/denglu",templateUrl:"view/denglu.html",controller:"dengluCtrl"}),t.otherwise("work")}]),angular.module("app").directive("cityList",[function(){return{restrict:"E",templateUrl:"view/template/cityList.html",replace:!0,scope:{isShow:"=",data:"="},controller:["$scope",function(e){e.changecity=function(t){e.$emit("cityid",t),e.isShow=!1}}]}}]),angular.module("app").directive("yuCompany",[function(){return{restrict:"E",templateUrl:"view/template/company.html",replace:!0,scope:{data:"="}}}]),angular.module("app").directive("yuContent",[function(){return{restrict:"E",templateUrl:"view/template/work_content.html",replace:!0,scope:{data:"="}}}]),angular.module("app").directive("yuFooter",[function(){return{restrict:"E",templateUrl:"view/template/footer.html",replacet:!0,controller:["$scope",function(e){e.uzi=localStorage.getItem("userid"),console.log(e.uzi)}]}}]),angular.module("app").directive("yuHeader",[function(){return{restrict:"E",templateUrl:"view/template/header.html",scope:{title:"@",isShow:"=",fade:"="},controller:["$scope",function(e){e.back=function(){e.fade?e.isShow=!1:window.history.back()}}]}}]),angular.module("app").directive("kws",[function(){return{restrict:"E",templateUrl:"view/template/kws.html",replace:!0,scope:{data:"="},controller:["$scope",function(e){e.removekeywords=function(t){console.log(t),e.$emit("removekeywords",t)},e.odsearch=function(t){e.$emit("odsearch",t)}}]}}]),angular.module("app").filter("jobfilter",function(){return function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o],i=new RegExp(t.keywords).test(r.companyName)||new RegExp(t.keywords).test(r.job);t.city?t.city==r.cityName&&i&&n.push(r):i&&n.push(r)}return n}}),angular.module("app").service("xiangqing_content_service",["$http",function(e){this.all=function(){return e({url:"../data/company.json",method:"get"}).then(function(e){return e.data})},this.oneId=function(e){return this.all().then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]})}}]),angular.module("app").service("cityList_service",["$http",function(e){this.all=function(){return e({url:"../data/city.json",method:"get"}).then(function(e){return e.data})},this.oneId=function(e){return this.all().then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]})}}]),angular.module("app").service("keywords_service",["$http",function(e){this.set=function(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)},this.get=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]}}]),angular.module("app").service("work_content_service",["$http",function(e){this.all=function(){return e({url:"../data/jobList.json",method:"get"}).then(function(e){return e.data})},this.oneId=function(e){return this.all().then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]})}}]);