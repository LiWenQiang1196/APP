angular.module("app",["ui.router","validation","validation.rule"]),angular.module("app").config(["$validationProvider",function(e){var t={phone:/^(1[3|5|7|8]{1}\d{9})$/,password:function(e){return e+="",e.length>=6}},n={phone:{error:"请输入合法的手机号",success:""},password:{error:"密码不能少于6位",success:""}};e.setExpression(t).setDefaultMsg(n)}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("work",{url:"/work",templateUrl:"view/work.html",controller:"workCtrl"}),e.state("search",{url:"/search",templateUrl:"view/search.html",controller:"searchCtrl"}),e.state("mine",{url:"/mine",templateUrl:"view/mine.html",controller:"mineCtrl"}),e.state("mine1",{url:"/mine1",templateUrl:"view/mine1.html",controller:"mine1Ctrl"}),e.state("xiangqing",{url:"/xiangqing/:id",templateUrl:"view/xiangqing.html",controller:"xiangqingCtrl"}),e.state("zhiwei",{url:"/zhiwei/:id",templateUrl:"view/zhiwei.html",controller:"zhiweiCtrl"}),e.state("denglu",{url:"/denglu",templateUrl:"view/denglu.html",controller:"dengluCtrl"}),t.otherwise("work")}]),angular.module("app").controller("dengluCtrl",["$scope","$state",function(e,t){e.next=function(){localStorage.setItem("userid",1),t.go("mine1")}}]),angular.module("app").controller("mine1Ctrl",["$scope","$state",function(e,t){e.removuserid=function(){localStorage.removeItem("userid"),t.go("mine")}}]),angular.module("app").controller("mineCtrl",["$scope",function(e){}]),angular.module("app").controller("searchCtrl",["$filter","work_content_service","keywords_service","cityList_service","$scope",function(e,t,n,r,o){r.all().then(function(e){o.data=e}),o.keywordslist=n.get("keywords"),o.qshow=function(){o.isShow=!0},o.$on("cityid",function(e,t){r.oneId(t).then(function(e){o.cc=e.name,o.search()})}),o.search=function(){if(o.keywords){o.trfl=!0;var r=n.get("keywords");r.unshift(o.keywords),console.log(o.keywords),n.set("keywords",r),t.all().then(function(t){var n={city:o.cc,keywords:o.keywords},r=e("jobfilter")(t,n);0==r.length?o.joblist=[]:o.joblist=r})}},o.$on("removekeywords",function(e,t){o.keywordslist.splice(t,1),n.set("keywords",o.keywordslist)}),o.$on("odsearch",function(e,t){o.keywords=t,o.search()})}]),angular.module("app").controller("workCtrl",["$http","$scope","work_content_service",function(e,t,n){n.all().then(function(e){t.list=e})}]),angular.module("app").controller("xiangqingCtrl",["xiangqing_content_service","work_content_service","$scope","$state",function(e,t,n,r){var o=r.params.id;t.oneId(o).then(function(t){n.dtaa=t,companyId=t.companyId,e.oneId(companyId).then(function(e){n.com=e})})}]),angular.module("app").controller("zhiweiCtrl",["xiangqing_content_service","$scope","$state",function(e,t,n){var r=n.params.id;e.oneId(r).then(function(e){t.data=e,t.index=0,t.change=function(e){t.index=e,t.ll=t.data.positionClass[e].positionList},t.change(0)})}]),angular.module("app").filter("jobfilter",function(){return function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=new RegExp(t.keywords).test(o.companyName)||new RegExp(t.keywords).test(o.job);t.city?t.city==o.cityName&&i&&n.push(o):i&&n.push(o)}return n}}),angular.module("app").directive("cityList",[function(){return{restrict:"E",templateUrl:"view/template/cityList.html",replace:!0,scope:{isShow:"=",data:"="},controller:["$scope",function(e){e.changecity=function(t){e.$emit("cityid",t),e.isShow=!1}}]}}]),angular.module("app").directive("yuCompany",[function(){return{restrict:"E",templateUrl:"view/template/company.html",replace:!0,scope:{data:"="}}}]),angular.module("app").directive("yuContent",[function(){return{restrict:"E",templateUrl:"view/template/work_content.html",replace:!0,scope:{data:"="}}}]),angular.module("app").directive("yuFooter",[function(){return{restrict:"E",templateUrl:"view/template/footer.html",replacet:!0,controller:["$scope",function(e){e.uzi=localStorage.getItem("userid")}]}}]),angular.module("app").directive("yuHeader",[function(){return{restrict:"E",templateUrl:"view/template/header.html",scope:{title:"@",isShow:"=",fade:"="},controller:["$scope",function(e){e.back=function(){e.fade?e.isShow=!1:window.history.back()}}]}}]),angular.module("app").directive("kws",[function(){return{restrict:"E",templateUrl:"view/template/kws.html",replace:!0,scope:{data:"="},controller:["$scope",function(e){e.removekeywords=function(t){e.$emit("removekeywords",t)},e.odsearch=function(t){e.$emit("odsearch",t)}}]}}]),angular.module("app").service("xiangqing_content_service",["$http",function(e){this.all=function(){return e({url:"../data/company.json",method:"get"}).then(function(e){return e.data})},this.oneId=function(e){return this.all().then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]})}}]),angular.module("app").service("cityList_service",["$http",function(e){this.all=function(){return e({url:"../data/city.json",method:"get"}).then(function(e){return e.data})},this.oneId=function(e){return this.all().then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]})}}]),angular.module("app").service("keywords_service",["$http",function(e){this.set=function(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)},this.get=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]}}]),angular.module("app").service("work_content_service",["$http",function(e){this.all=function(){return e({url:"../data/jobList.json",method:"get"}).then(function(e){return e.data})},this.oneId=function(e){return this.all().then(function(t){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]})}}]);